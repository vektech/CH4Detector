C51 COMPILER V9.60.0.0   FLASH                                                             02/01/2020 20:17:01 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE FLASH
OBJECT MODULE PLACED IN .\Objects\flash.obj
COMPILER INVOKED BY: D:\Program Files (x86)\Keil\C51\BIN\C51.EXE ..\..\Code\Source\flash.c LARGE OPTIMIZE(8,SPEED) BROWS
                    -E INCDIR(..\..\Code\Include) DEBUG OBJECTEXTEND PRINT(.\Listings\flash.lst) TABS(2) OBJECT(.\Objects\flash.obj)

line level    source

   1          /**
   2           *******************************************************************************
   3           * @copyright 2017-2020, Electronic Technology Co. Ltd
   4           * @file      flash.c
   5           * @version   V1.0.0
   6           * @brief     
   7           * @warning   
   8           *******************************************************************************
   9           * @remarks
  10           * 1. Version                Date                 Author
  11           *    v1.0.0                 2020年1月1日          Unknown
  12           *    Modification: 创建文档
  13           *******************************************************************************
  14           */
  15          /* NEED FIX */
  16          /*******************************************************************************
  17           *                 Include File Section ('#include')
  18           ******************************************************************************/
  19          #include "N79E81x.h"
  20          #include "flash.h"
  21          
  22          
  23          /*******************************************************************************
  24           *                 Macro Define Section ('#define')
  25           ******************************************************************************/
  26          
  27          /*******************************************************************************
  28           *                 Struct Define Section ('typedef')
  29           ******************************************************************************/
  30          
  31          /*******************************************************************************
  32           *                 Normal Prototype Declare Section ('function')
  33           ******************************************************************************/
  34          
  35          /*******************************************************************************
  36           *                 File Static Prototype Declare Section ('static function')
  37           ******************************************************************************/
  38          
  39          /*******************************************************************************
  40           *                 Global Variable Declare Section ('variable')
  41           ******************************************************************************/
  42          
  43          /*******************************************************************************
  44           *                 File Static Variable Define Section ('static variable')
  45           ******************************************************************************/
  46          
  47          /*******************************************************************************
  48           *                 Normal Function Define Section ('function')
  49           ******************************************************************************/
  50          /* 打开ISP模式 */
  51          void Enable_ISP_Mode(void)
  52          {
  53   1          /* Record EA Status */
  54   1          EA_save_bit = EA;
C51 COMPILER V9.60.0.0   FLASH                                                             02/01/2020 20:17:01 PAGE 2   

*** ERROR C202 IN LINE 54 OF ..\..\Code\Source\flash.c: 'EA_save_bit': undefined identifier
  55   1          /* 关闭全局中断 */
  56   1          EA = 0;
  57   1      
  58   1          /* 关键SFR读写保护 */
  59   1          TA = 0xAA;
  60   1          TA = 0x55;
  61   1          /* 将ISPEN置1 开启ISP功能 
  62   1              - 使能ISP功能将以内部的22.1184MHz RC 振荡器为时钟
  63   1              - 清ISPEN应该是ISP操作后的最后一条指令 这样可以停止内部RC以减少功耗
  64   1              */
  65   1          CHPCON |= 0x01;
  66   1          /* Resume EA */
  67   1          EA = EA_save_bit;
*** ERROR C202 IN LINE 67 OF ..\..\Code\Source\flash.c: 'EA_save_bit': undefined identifier
  68   1      }
  69          
  70          /* 关闭ISP模式 */
  71          void Disable_ISP_Mode(void)
  72          {
  73   1          /* Disable ISP */
  74   1          /* Record EA Status */
  75   1          EA_save_bit = EA;
*** ERROR C202 IN LINE 75 OF ..\..\Code\Source\flash.c: 'EA_save_bit': undefined identifier
  76   1          /* 关闭全局中断 */
  77   1          EA = 0;
  78   1      
  79   1          /* ISP 功能的关键SFR读写保护 */
  80   1          TA = 0xAA;
  81   1          TA = 0x55;
  82   1          /* 将ISPEN置0 关闭ISP功能 
  83   1              - 使能ISP功能将以内部的22.1184MHz RC 振荡器为时钟
  84   1              - 清ISPEN应该是ISP操作后的最后一条指令 这样可以停止内部RC以减少功耗
  85   1              */
  86   1          CHPCON &= 0xFE;
  87   1          /* Resume EA */
  88   1          EA = EA_save_bit;
*** ERROR C202 IN LINE 88 OF ..\..\Code\Source\flash.c: 'EA_save_bit': undefined identifier
  89   1      }
  90          
  91          /* 触发ISP功能 以执行ISP指令 */
  92          void Trigger_ISP(void)
  93          {
  94   1          /* Record EA Status */
  95   1          EA_save_bit = EA;
*** ERROR C202 IN LINE 95 OF ..\..\Code\Source\flash.c: 'EA_save_bit': undefined identifier
  96   1          /* 关闭全局中断 */
  97   1          EA = 0;
  98   1      
  99   1          /* ISP 功能的关键SFR读写保护 */
 100   1          TA = 0xAA;
 101   1          TA = 0x55;
 102   1          /* ISPGO -> ISPTRG[0] 置位 执行ISP
 103   1              - 设置该位为1开始执行ISP 该指令后 CPU保持程序计数器PC ISP硬件自动管理控制该过程
 104   1              - ISP完成后 程序计数器继续执行 ISPGO位自动清零 保持为0
 105   1              */
 106   1          ISPTRG |= 0x01;
 107   1          /* Resume EA */
 108   1          EA = EA_save_bit;
*** ERROR C202 IN LINE 108 OF ..\..\Code\Source\flash.c: 'EA_save_bit': undefined identifier
 109   1      }
 110          
C51 COMPILER V9.60.0.0   FLASH                                                             02/01/2020 20:17:01 PAGE 3   

 111          /*******************************************************************************
 112           *                 File Static Function Define Section ('static function')
 113           ******************************************************************************/
 114          
 115          /*******************************************************************************
 116           *                 End of File ('EOF')
 117           ******************************************************************************/

C51 COMPILATION COMPLETE.  0 WARNING(S),  6 ERROR(S)
